.buy
  .main_contents
    .main_details
      -# 商品情報を部分テンプレートで共通化してます。今回は実装内容と逸れるので省略
      -# = render "purchases/shared/purchase_product_info.html.haml", product: @product, images: @images
    .purchase_registration
      .purchase_registration_main
        .payment
          支払い金額   
        .amount
          = "#{@item.price}" + "円"
      -# クレジットカードを登録済みの場合の表示
      - if @user.credit_card.present?
        .purchase_function
          .credit_card_info_title
            クレジットカード情報
            -# クレジットカード情報を表示させます。
            .credit_card_info
              .credit_card_info__brand
                = image_tag "cards/#{@card_src}", class: "credit_card_info__brand__img", alt: @card_brand
              .credit_card_info__numbers
                .number
                  = "**** **** **** " + @customer_card.last4
                .expiration_date
                  .expiration_date__title
                    有効期限
                  .expiration_date__info
                    = @exp_month + " / " + @exp_year
          .purchase_function__btn
            = link_to "登録クレジットカードで購入する", pay_product_purchases_path(item_id: @product.id), method: :post, class: "btn"
      - else 
        .purchase_none_btn
          -# Checkoutのフォームを開くための記述
          = form_tag(action: :pay, method: :post) do
            %script.payjp-button{src: "https://checkout.pay.jp", type: "text/javascript" ,data-text: "購入する" ,data-key: "pk_test_f9c4bb64158e5b8e9834ca5c"}

.wrapper
  .header
    .headerLogo
      -# = link_to image_tag("logo/logo.png", class: "logo"), action: "index"

  .main
    .mainText
      .mainText__lists
        .mainText__lists--1
          .textBox1
            購入内容の確認
        .mainText__lists--2
          .textBox2
            .itemImage
              商品画像
            .itemInfo
              %p.itemName
                商品名
              %p.itemPrice
                値段
        .mainText__lists--3
          .textBox3
            .payment
              .paymentText
                支払い金額
              .paymentAmount
                = "#{@item.price}" + "円"
            .usePoints
              ポイントの利用はありません
        .mainText__lists--4
          .textBox4
            %h3.paymentMethod
              支払い方法
            .cardInfo
              = link_to "登録してください", "/credit_cards/new", method: :get
              -# = link_to "登録してください", "/credit_cards/1", method: :delete
              -# :plain
                -# <script type="text/javascript"
                -# src="https://checkout.pay.jp/"
                -# src="payjp.js"
                -# class="payjp-button"
                
                -# data-key="pk_test_f9c4bb64158e5b8e9834ca5c"
                -# data-submit-text="カードで支払う"
                -# data-partial="true">
                </script>
        .mainText__lists--5
          .textBox5
            %h3.shippingText
              配送先
            .addressInfo
              = link_to "登録してください", "#"
        .mainText__lists--6
          .textBox6
            .precautions
              郵便局/コンビニ受取をご希望の方は、購入後に取引画面から受取場所を変更をすることが可能です。出品者が発送作業を開始した後は受取場所の変更ができませんので、早めに変更を行ってください。
            .headsUp
              配送先と支払い方法の入力を完了してください。
            .purchaseButton
              = submit_tag "購入する", id: "button"

  .footer
    .footerText
      %ul.footerText__lists
        %li
          プライバシーポリシー
        %li
          FURIMA利用規約
        %li
          特定商取引に関する表記
    .footerLogo
      -# = link_to image_tag("logo/logo.png", class: "logo"), action: "index"
    .footerCompany
      ©︎FURIMA, Inc